#!/usr/bin/perl -sw
use vars qw($h $f $o);

if ($h) {
        print <<EOF;
Create (part of) Splunk search command to be pasted into web search bar.

Input can come from STDIN or a file. Items (fields) in the input are white
space separated.

  $0 -f=FIELD -o=OPERATOR

    -f=FIELD    field name (ex. host, sourceype)
    -o=OP       operator (AND, OR)

EXAMPLES

  echo host1 host2 host3 | $0 -f=host -o=OR

  $0 -f=src -o=OR subnets_copied_from_excel.txt

EOF
        exit;
}

$values = do { local $/; <> };
die "Missing input, exiting ...\n" unless $values;
@values = split ' ', $values;

for $value (@values) {
        $expr = qq($f=$value);
        push @expressions, $expr;
        $count++;
}

print "Processed $count values";
print "\n", "-" x 80, "\n";
print join " $o ", @expressions;
print "\n", "-" x 80, "\n";
